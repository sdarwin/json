<!DOCTYPE html>
<!--
    Copyright (c) 2019 Vinnie Falco (vinnie.falco@gmail.com)

    Distributed under the Boost Software License, Version 1.0. (See accompanying
    file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)

    Official repository: https://github.com/boostorg/json
-->
<html>
<head>
<font face="arial"/>
</head>
<body>
<h1>Boost.JSON Benchmarks</h1>
<div id="benchmarks">
</div>
<br>
<textarea id="data" cols="60" rows="20" overflow="hidden" onkeyup="autosize(this)">

Parse apache_builds.json,clang x64/sse2,boost (pool),515
Parse apache_builds.json,clang x64/sse2,boost,345
Parse apache_builds.json,clang x64/sse2,rapidjson (pool),302
Parse apache_builds.json,clang x64/sse2,rapidjson,248
Parse apache_builds.json,clang x64/sse2,nlohmann,76
Parse canada.json,clang x64/sse2,boost (pool),447
Parse canada.json,clang x64/sse2,boost,296
Parse canada.json,clang x64/sse2,rapidjson (pool),407
Parse canada.json,clang x64/sse2,rapidjson,285
Parse canada.json,clang x64/sse2,nlohmann,44
Parse citm_catalog.json,clang x64/sse2,boost (pool),853
Parse citm_catalog.json,clang x64/sse2,boost,415
Parse citm_catalog.json,clang x64/sse2,rapidjson (pool),802
Parse citm_catalog.json,clang x64/sse2,rapidjson,608
Parse citm_catalog.json,clang x64/sse2,nlohmann,91
Parse github_events.json,clang x64/sse2,boost (pool),565
Parse github_events.json,clang x64/sse2,boost,274
Parse github_events.json,clang x64/sse2,rapidjson (pool),301
Parse github_events.json,clang x64/sse2,rapidjson,242
Parse github_events.json,clang x64/sse2,nlohmann,74
Parse gsoc-2018.json,clang x64/sse2,boost (pool),528
Parse gsoc-2018.json,clang x64/sse2,boost,399
Parse gsoc-2018.json,clang x64/sse2,rapidjson (pool),298
Parse gsoc-2018.json,clang x64/sse2,rapidjson,276
Parse gsoc-2018.json,clang x64/sse2,nlohmann,107
Parse instruments.json,clang x64/sse2,boost (pool),464
Parse instruments.json,clang x64/sse2,boost,226
Parse instruments.json,clang x64/sse2,rapidjson (pool),420
Parse instruments.json,clang x64/sse2,rapidjson,319
Parse instruments.json,clang x64/sse2,nlohmann,69
Parse marine_ik.json,clang x64/sse2,boost (pool),419
Parse marine_ik.json,clang x64/sse2,boost,255
Parse marine_ik.json,clang x64/sse2,rapidjson (pool),415
Parse marine_ik.json,clang x64/sse2,rapidjson,323
Parse marine_ik.json,clang x64/sse2,nlohmann,48
Parse mesh.json,clang x64/sse2,boost (pool),437
Parse mesh.json,clang x64/sse2,boost,357
Parse mesh.json,clang x64/sse2,rapidjson (pool),313
Parse mesh.json,clang x64/sse2,rapidjson,280
Parse mesh.json,clang x64/sse2,nlohmann,50
Parse mesh.pretty.json,clang x64/sse2,boost (pool),805
Parse mesh.pretty.json,clang x64/sse2,boost,718
Parse mesh.pretty.json,clang x64/sse2,rapidjson (pool),620
Parse mesh.pretty.json,clang x64/sse2,rapidjson,557
Parse mesh.pretty.json,clang x64/sse2,nlohmann,79
Parse numbers.json,clang x64/sse2,boost (pool),638
Parse numbers.json,clang x64/sse2,boost,602
Parse numbers.json,clang x64/sse2,rapidjson (pool),406
Parse numbers.json,clang x64/sse2,rapidjson,372
Parse numbers.json,clang x64/sse2,nlohmann,51
Parse random.json,clang x64/sse2,boost (pool),275
Parse random.json,clang x64/sse2,boost,174
Parse random.json,clang x64/sse2,rapidjson (pool),250
Parse random.json,clang x64/sse2,rapidjson,197
Parse random.json,clang x64/sse2,nlohmann,48
Parse twitterescaped.json,clang x64/sse2,boost (pool),348
Parse twitterescaped.json,clang x64/sse2,boost,202
Parse twitterescaped.json,clang x64/sse2,rapidjson (pool),254
Parse twitterescaped.json,clang x64/sse2,rapidjson,206
Parse twitterescaped.json,clang x64/sse2,nlohmann,64
Parse twitter.json,clang x64/sse2,boost (pool),416
Parse twitter.json,clang x64/sse2,boost,236
Parse twitter.json,clang x64/sse2,rapidjson (pool),344
Parse twitter.json,clang x64/sse2,rapidjson,267
Parse twitter.json,clang x64/sse2,nlohmann,70
Parse update-center.json,clang x64/sse2,boost (pool),400
Parse update-center.json,clang x64/sse2,boost,234
Parse update-center.json,clang x64/sse2,rapidjson (pool),247
Parse update-center.json,clang x64/sse2,rapidjson,188
Parse update-center.json,clang x64/sse2,nlohmann,62
Serialize apache_builds.json,clang x64/sse2,boost (pool),1276
Serialize apache_builds.json,clang x64/sse2,boost,1216
Serialize apache_builds.json,clang x64/sse2,rapidjson (pool),668
Serialize apache_builds.json,clang x64/sse2,rapidjson,748
Serialize apache_builds.json,clang x64/sse2,nlohmann,305
Serialize canada.json,clang x64/sse2,boost (pool),370
Serialize canada.json,clang x64/sse2,boost,366
Serialize canada.json,clang x64/sse2,rapidjson (pool),188
Serialize canada.json,clang x64/sse2,rapidjson,184
Serialize canada.json,clang x64/sse2,nlohmann,145
Serialize citm_catalog.json,clang x64/sse2,boost (pool),1878
Serialize citm_catalog.json,clang x64/sse2,boost,1823
Serialize citm_catalog.json,clang x64/sse2,rapidjson (pool),1168
Serialize citm_catalog.json,clang x64/sse2,rapidjson,1192
Serialize citm_catalog.json,clang x64/sse2,nlohmann,718
Serialize github_events.json,clang x64/sse2,boost (pool),1399
Serialize github_events.json,clang x64/sse2,boost,1386
Serialize github_events.json,clang x64/sse2,rapidjson (pool),744
Serialize github_events.json,clang x64/sse2,rapidjson,843
Serialize github_events.json,clang x64/sse2,nlohmann,270
Serialize gsoc-2018.json,clang x64/sse2,boost (pool),1404
Serialize gsoc-2018.json,clang x64/sse2,boost,1382
Serialize gsoc-2018.json,clang x64/sse2,rapidjson (pool),1426
Serialize gsoc-2018.json,clang x64/sse2,rapidjson,1546
Serialize gsoc-2018.json,clang x64/sse2,nlohmann,183
Serialize instruments.json,clang x64/sse2,boost (pool),1282
Serialize instruments.json,clang x64/sse2,boost,1250
Serialize instruments.json,clang x64/sse2,rapidjson (pool),635
Serialize instruments.json,clang x64/sse2,rapidjson,689
Serialize instruments.json,clang x64/sse2,nlohmann,365
Serialize marine_ik.json,clang x64/sse2,boost (pool),295
Serialize marine_ik.json,clang x64/sse2,boost,291
Serialize marine_ik.json,clang x64/sse2,rapidjson (pool),262
Serialize marine_ik.json,clang x64/sse2,rapidjson,257
Serialize marine_ik.json,clang x64/sse2,nlohmann,164
Serialize mesh.json,clang x64/sse2,boost (pool),313
Serialize mesh.json,clang x64/sse2,boost,313
Serialize mesh.json,clang x64/sse2,rapidjson (pool),221
Serialize mesh.json,clang x64/sse2,rapidjson,220
Serialize mesh.json,clang x64/sse2,nlohmann,183
Serialize mesh.pretty.json,clang x64/sse2,boost (pool),679
Serialize mesh.pretty.json,clang x64/sse2,boost,678
Serialize mesh.pretty.json,clang x64/sse2,rapidjson (pool),482
Serialize mesh.pretty.json,clang x64/sse2,rapidjson,479
Serialize mesh.pretty.json,clang x64/sse2,nlohmann,390
Serialize numbers.json,clang x64/sse2,boost (pool),285
Serialize numbers.json,clang x64/sse2,boost,286
Serialize numbers.json,clang x64/sse2,rapidjson (pool),181
Serialize numbers.json,clang x64/sse2,rapidjson,180
Serialize numbers.json,clang x64/sse2,nlohmann,157
Serialize random.json,clang x64/sse2,boost (pool),737
Serialize random.json,clang x64/sse2,boost,708
Serialize random.json,clang x64/sse2,rapidjson (pool),383
Serialize random.json,clang x64/sse2,rapidjson,411
Serialize random.json,clang x64/sse2,nlohmann,204
Serialize twitterescaped.json,clang x64/sse2,boost (pool),1202
Serialize twitterescaped.json,clang x64/sse2,boost,1185
Serialize twitterescaped.json,clang x64/sse2,rapidjson (pool),553
Serialize twitterescaped.json,clang x64/sse2,rapidjson,626
Serialize twitterescaped.json,clang x64/sse2,nlohmann,242
Serialize twitter.json,clang x64/sse2,boost (pool),1344
Serialize twitter.json,clang x64/sse2,boost,1327
Serialize twitter.json,clang x64/sse2,rapidjson (pool),622
Serialize twitter.json,clang x64/sse2,rapidjson,704
Serialize twitter.json,clang x64/sse2,nlohmann,272
Serialize update-center.json,clang x64/sse2,boost (pool),836
Serialize update-center.json,clang x64/sse2,boost,798
Serialize update-center.json,clang x64/sse2,rapidjson (pool),451
Serialize update-center.json,clang x64/sse2,rapidjson,506
Serialize update-center.json,clang x64/sse2,nlohmann,178
Parse apache_builds.json,gcc x64/sse2,boost (pool),520
Parse apache_builds.json,gcc x64/sse2,boost,343
Parse apache_builds.json,gcc x64/sse2,rapidjson (pool),306
Parse apache_builds.json,gcc x64/sse2,rapidjson,246
Parse apache_builds.json,gcc x64/sse2,nlohmann,83
Parse canada.json,gcc x64/sse2,boost (pool),500
Parse canada.json,gcc x64/sse2,boost,295
Parse canada.json,gcc x64/sse2,rapidjson (pool),379
Parse canada.json,gcc x64/sse2,rapidjson,323
Parse canada.json,gcc x64/sse2,nlohmann,50
Parse citm_catalog.json,gcc x64/sse2,boost (pool),913
Parse citm_catalog.json,gcc x64/sse2,boost,433
Parse citm_catalog.json,gcc x64/sse2,rapidjson (pool),814
Parse citm_catalog.json,gcc x64/sse2,rapidjson,568
Parse citm_catalog.json,gcc x64/sse2,nlohmann,117
Parse github_events.json,gcc x64/sse2,boost (pool),562
Parse github_events.json,gcc x64/sse2,boost,272
Parse github_events.json,gcc x64/sse2,rapidjson (pool),311
Parse github_events.json,gcc x64/sse2,rapidjson,242
Parse github_events.json,gcc x64/sse2,nlohmann,80
Parse gsoc-2018.json,gcc x64/sse2,boost (pool),540
Parse gsoc-2018.json,gcc x64/sse2,boost,401
Parse gsoc-2018.json,gcc x64/sse2,rapidjson (pool),309
Parse gsoc-2018.json,gcc x64/sse2,rapidjson,283
Parse gsoc-2018.json,gcc x64/sse2,nlohmann,116
Parse instruments.json,gcc x64/sse2,boost (pool),424
Parse instruments.json,gcc x64/sse2,boost,229
Parse instruments.json,gcc x64/sse2,rapidjson (pool),419
Parse instruments.json,gcc x64/sse2,rapidjson,311
Parse instruments.json,gcc x64/sse2,nlohmann,82
Parse marine_ik.json,gcc x64/sse2,boost (pool),409
Parse marine_ik.json,gcc x64/sse2,boost,253
Parse marine_ik.json,gcc x64/sse2,rapidjson (pool),421
Parse marine_ik.json,gcc x64/sse2,rapidjson,328
Parse marine_ik.json,gcc x64/sse2,nlohmann,53
Parse mesh.json,gcc x64/sse2,boost (pool),391
Parse mesh.json,gcc x64/sse2,boost,321
Parse mesh.json,gcc x64/sse2,rapidjson (pool),338
Parse mesh.json,gcc x64/sse2,rapidjson,293
Parse mesh.json,gcc x64/sse2,nlohmann,58
Parse mesh.pretty.json,gcc x64/sse2,boost (pool),752
Parse mesh.pretty.json,gcc x64/sse2,boost,629
Parse mesh.pretty.json,gcc x64/sse2,rapidjson (pool),662
Parse mesh.pretty.json,gcc x64/sse2,rapidjson,585
Parse mesh.pretty.json,gcc x64/sse2,nlohmann,104
Parse numbers.json,gcc x64/sse2,boost (pool),656
Parse numbers.json,gcc x64/sse2,boost,592
Parse numbers.json,gcc x64/sse2,rapidjson (pool),451
Parse numbers.json,gcc x64/sse2,rapidjson,412
Parse numbers.json,gcc x64/sse2,nlohmann,61
Parse random.json,gcc x64/sse2,boost (pool),244
Parse random.json,gcc x64/sse2,boost,167
Parse random.json,gcc x64/sse2,rapidjson (pool),257
Parse random.json,gcc x64/sse2,rapidjson,193
Parse random.json,gcc x64/sse2,nlohmann,55
Parse twitterescaped.json,gcc x64/sse2,boost (pool),337
Parse twitterescaped.json,gcc x64/sse2,boost,205
Parse twitterescaped.json,gcc x64/sse2,rapidjson (pool),296
Parse twitterescaped.json,gcc x64/sse2,rapidjson,227
Parse twitterescaped.json,gcc x64/sse2,nlohmann,68
Parse twitter.json,gcc x64/sse2,boost (pool),376
Parse twitter.json,gcc x64/sse2,boost,232
Parse twitter.json,gcc x64/sse2,rapidjson (pool),353
Parse twitter.json,gcc x64/sse2,rapidjson,270
Parse twitter.json,gcc x64/sse2,nlohmann,79
Parse update-center.json,gcc x64/sse2,boost (pool),438
Parse update-center.json,gcc x64/sse2,boost,247
Parse update-center.json,gcc x64/sse2,rapidjson (pool),262
Parse update-center.json,gcc x64/sse2,rapidjson,193
Parse update-center.json,gcc x64/sse2,nlohmann,63
Serialize apache_builds.json,gcc x64/sse2,boost (pool),1207
Serialize apache_builds.json,gcc x64/sse2,boost,1180
Serialize apache_builds.json,gcc x64/sse2,rapidjson (pool),677
Serialize apache_builds.json,gcc x64/sse2,rapidjson,760
Serialize apache_builds.json,gcc x64/sse2,nlohmann,291
Serialize canada.json,gcc x64/sse2,boost (pool),373
Serialize canada.json,gcc x64/sse2,boost,368
Serialize canada.json,gcc x64/sse2,rapidjson (pool),200
Serialize canada.json,gcc x64/sse2,rapidjson,200
Serialize canada.json,gcc x64/sse2,nlohmann,166
Serialize citm_catalog.json,gcc x64/sse2,boost (pool),2066
Serialize citm_catalog.json,gcc x64/sse2,boost,2008
Serialize citm_catalog.json,gcc x64/sse2,rapidjson (pool),1277
Serialize citm_catalog.json,gcc x64/sse2,rapidjson,1310
Serialize citm_catalog.json,gcc x64/sse2,nlohmann,698
Serialize github_events.json,gcc x64/sse2,boost (pool),1290
Serialize github_events.json,gcc x64/sse2,boost,1284
Serialize github_events.json,gcc x64/sse2,rapidjson (pool),755
Serialize github_events.json,gcc x64/sse2,rapidjson,860
Serialize github_events.json,gcc x64/sse2,nlohmann,268
Serialize gsoc-2018.json,gcc x64/sse2,boost (pool),1058
Serialize gsoc-2018.json,gcc x64/sse2,boost,1045
Serialize gsoc-2018.json,gcc x64/sse2,rapidjson (pool),1437
Serialize gsoc-2018.json,gcc x64/sse2,rapidjson,1562
Serialize gsoc-2018.json,gcc x64/sse2,nlohmann,174
Serialize instruments.json,gcc x64/sse2,boost (pool),1313
Serialize instruments.json,gcc x64/sse2,boost,1283
Serialize instruments.json,gcc x64/sse2,rapidjson (pool),658
Serialize instruments.json,gcc x64/sse2,rapidjson,719
Serialize instruments.json,gcc x64/sse2,nlohmann,344
Serialize marine_ik.json,gcc x64/sse2,boost (pool),299
Serialize marine_ik.json,gcc x64/sse2,boost,295
Serialize marine_ik.json,gcc x64/sse2,rapidjson (pool),311
Serialize marine_ik.json,gcc x64/sse2,rapidjson,305
Serialize marine_ik.json,gcc x64/sse2,nlohmann,197
Serialize mesh.json,gcc x64/sse2,boost (pool),310
Serialize mesh.json,gcc x64/sse2,boost,308
Serialize mesh.json,gcc x64/sse2,rapidjson (pool),247
Serialize mesh.json,gcc x64/sse2,rapidjson,247
Serialize mesh.json,gcc x64/sse2,nlohmann,213
Serialize mesh.pretty.json,gcc x64/sse2,boost (pool),674
Serialize mesh.pretty.json,gcc x64/sse2,boost,673
Serialize mesh.pretty.json,gcc x64/sse2,rapidjson (pool),539
Serialize mesh.pretty.json,gcc x64/sse2,rapidjson,536
Serialize mesh.pretty.json,gcc x64/sse2,nlohmann,457
Serialize numbers.json,gcc x64/sse2,boost (pool),269
Serialize numbers.json,gcc x64/sse2,boost,269
Serialize numbers.json,gcc x64/sse2,rapidjson (pool),189
Serialize numbers.json,gcc x64/sse2,rapidjson,188
Serialize numbers.json,gcc x64/sse2,nlohmann,187
Serialize random.json,gcc x64/sse2,boost (pool),728
Serialize random.json,gcc x64/sse2,boost,698
Serialize random.json,gcc x64/sse2,rapidjson (pool),390
Serialize random.json,gcc x64/sse2,rapidjson,418
Serialize random.json,gcc x64/sse2,nlohmann,197
Serialize twitterescaped.json,gcc x64/sse2,boost (pool),1103
Serialize twitterescaped.json,gcc x64/sse2,boost,1089
Serialize twitterescaped.json,gcc x64/sse2,rapidjson (pool),581
Serialize twitterescaped.json,gcc x64/sse2,rapidjson,660
Serialize twitterescaped.json,gcc x64/sse2,nlohmann,237
Serialize twitter.json,gcc x64/sse2,boost (pool),1236
Serialize twitter.json,gcc x64/sse2,boost,1219
Serialize twitter.json,gcc x64/sse2,rapidjson (pool),653
Serialize twitter.json,gcc x64/sse2,rapidjson,742
Serialize twitter.json,gcc x64/sse2,nlohmann,266
Serialize update-center.json,gcc x64/sse2,boost (pool),791
Serialize update-center.json,gcc x64/sse2,boost,765
Serialize update-center.json,gcc x64/sse2,rapidjson (pool),461
Serialize update-center.json,gcc x64/sse2,rapidjson,522
Serialize update-center.json,gcc x64/sse2,nlohmann,178


</textarea>

<script>

var Width = 600;

function autosize (f) {
  if (f.scrollHeight > f.clientHeight) {
    f.style.height = f.scrollHeight + "px";
  }
}

// Draw a single bar chart representing
// results for one platform and architecture
function draw_chart(ctx, title, rows, mbsMax) {
    var xMax = Math.max(...Object.values(rows));

    // gray separator
    ctx.beginPath();
    ctx.strokeStyle = "#A0A0A0";
    ctx.moveTo(0, 0.5);
    ctx.lineTo(Width, 0.5);
    ctx.stroke();
    ctx.translate(0, 28);

    // title
    ctx.textAlign = "left";
    ctx.fillStyle = "#000000";
    ctx.font = 'bold 16px sans-serif';
    ctx.fillText(title, 0, 0);
    ctx.translate(0, 26);

    // chart rows
    Object.entries(rows).forEach(([name, mbs]) =>
    {
        var dy = 4;

        ctx.textAlign = "left";
        ctx.fillStyle = "#000000";
        ctx.font = '14px sans-serif';
        ctx.fillText(name, 0, 0);

        var xMbs = 195;
        if(name.startsWith("boost"))
            ctx.fillStyle = "#eb342a";
        else
            ctx.fillStyle = "#909090";
        var w = (Width - 170) * mbs / mbsMax
        if(w < xMbs - 120)
            w = xMbs - 120;
        ctx.fillRect(130, -20+dy, w, 20);

        ctx.textAlign = "right";
        ctx.font = '13px sans-serif';
        ctx.fillStyle = "#000000";
        ctx.fillText(mbs + " MB/s", xMbs + 1, 1);
        ctx.fillStyle = "#ffffff";
        ctx.fillText(mbs + " MB/s", xMbs, 0);

        ctx.translate(0, 24);
    });

    // gray separator
    ctx.translate(0, -4);
    ctx.beginPath();
    ctx.strokeStyle = "#A0A0A0";
    ctx.moveTo(0, 0.5);
    ctx.lineTo(Width, 0.5);
    ctx.stroke();
}

// Draw multiple bar charts, one
// for each platform and architecture
function draw_charts(ctx, tab, mbsMax) {
    // top margin
    ctx.translate(0, 16);

    // draw each chart
    Object.entries(tab).forEach(([name, rows]) =>
    {
        draw_chart(ctx, name, rows, mbsMax);
    });

    // bottom margin
    ctx.translate(0, 16);
}

function measure_and_draw(canvas, tab) {
    mbsMax = 0;
    Object.entries(tab).forEach(([name, rows]) =>
    {
        mbsMax = Math.max(mbsMax, ...Object.values(rows));
    });

    var LeftMargin = 48;

    // Measure the height needed
    canvas.width = Width;
    canvas.height = 30000;
    var ctx = canvas.getContext("2d");
    ctx.save();
    draw_charts(ctx, tab);
    var tx = ctx.getTransform();
    var height = tx["f"];

    // Resize the canvas to fit
    canvas.width = LeftMargin + Width + 20;
    canvas.height = height;

    // Make everything opaque
    ctx.fillStyle = "#FFFFFF";
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.translate(LeftMargin, 0);
    draw_charts(ctx, tab, mbsMax);
    ctx.restore();
}

function update()
{
    var tab = new Object();
    var lines = data.value.split('\n');
    for (var i = 0; i < lines.length; i++)
    {
        if(lines[i].length == 0)
            continue;
        items = lines[i].split(',');
        var title = items[0]
        var target = items[1];
        var name = items[2];
        var mbs = items[3];
        if(! (title in tab))
            tab[title] = new Object();
        if(! (target in tab[title]))
            tab[title][target] = new Object();
        var set = tab[title][target];
        if(! (name in set))
            set[name] = new Object();           
        set[name] = mbs;
    }

    benchmarks.innerHTML = "";
    Object.entries(tab).forEach(([title, charts]) =>
    {
        benchmarks.innerHTML +=
            "<h2>" + title + "</h2>" +
            "<canvas id=\"" + title + "\" width=\"800\" height=\"600\">";
    });
    Object.entries(tab).forEach(([title, charts]) =>
    {
        measure_and_draw(document.getElementById(title), charts)
    });
}

data.oninput = function()
{
    update();
}

update();

</script>
</body>
</html>
